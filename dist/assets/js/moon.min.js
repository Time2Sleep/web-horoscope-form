let moonHoroscopeEditForm=document.querySelector(".edit-moon");function openMoonEdit(){document.querySelector(".add__horoscope-moon").classList.add("display_none"),document.querySelector(".moon__content").classList.add("display_none"),moonHoroscopeEditForm.classList.add("display_block")}let moonHoroscopes=JSON.parse(localStorage.getItem("moonHoroscopes"));null==moonHoroscopes&&(moonHoroscopes=[]);const saveMoonHoroscope=o=>{o.preventDefault();o={id:moonHoroscopes.length,date:document.getElementById("edit__format-day-moon").value,sign:document.getElementById("edit__sign-moon").value,horoscope:document.getElementById("edit__textarea-moon").value};moonHoroscopes.push(o),document.getElementById("edit-form-moon").reset(),localStorage.setItem("moonHoroscopes",JSON.stringify(moonHoroscopes))};function GetSortOrder(t){return function(o,e){return o[t]>e[t]?-1:o[t]<e[t]?1:0}}function buildMoonTable(e,o){let t=document.querySelector(".table__body-moon");if(null!=e){var n=100<e.length?100:e.length;for(let o=0;o<n;o++){var d=`
            <tr class="table__row">
                <td class="table__date">${e[o].date}</td>
                <td class="table__date">${signs[e[o].sign]}</td>
                <td class="table__text">${e[o].horoscope}</td>
                <td class="table__edit table__edit-moon" data-id="${e[o].id}" onclick="editExistingMoon(this)"><a href="#">Edit</a></td>
                <td class="table__edit table__edit-moon" data-id="${e[o].id}" onclick="deleteExistingMoon(this)"><a href="#">Delete</a></td>
            </tr> `;t.innerHTML+=d}}}function editExistingMoon(o){document.querySelector(".add__horoscope-moon").classList.add("display_none"),document.querySelector(".moon__content").classList.add("display_none"),moonHoroscopeEditForm.classList.add("display_block"),document.querySelector(".edit__apply-moon").classList.add("display_none"),document.querySelector(".edit__change-moon").classList.remove("display_none");o=Array.from(o.parentNode.parentNode.children).indexOf(o.parentNode);document.querySelector(".edit__change-moon").dataset.id=o;o=JSON.parse(localStorage.getItem("moonHoroscopes"))[o];document.getElementById("edit__format-day-moon").value=o.date,document.getElementById("edit__sign-moon").value=o.sign,document.getElementById("edit__textarea-moon").value=o.horoscope}function deleteExistingMoon(o){o=Array.from(o.parentNode.parentNode.children).indexOf(o.parentNode);let e=JSON.parse(localStorage.getItem("moonHoroscopes"));e.splice(o,1),localStorage.setItem("moonHoroscopes",JSON.stringify(e)),document.location.href="/"}document.querySelector(".edit__apply-moon").addEventListener("click",saveMoonHoroscope),null!=moonHoroscopes&&(moonHoroscopes=moonHoroscopes.sort(GetSortOrder("date"))),buildMoonTable(moonHoroscopes,"day");let changeMoonBtn=document.querySelector(".edit__change-moon");const saveChangesMoon=o=>{o.preventDefault();let e=JSON.parse(localStorage.getItem("moonHoroscopes"));e[changeMoonBtn.dataset.id].sign=document.getElementById("edit__sign-moon").value,e[changeMoonBtn.dataset.id].date=document.getElementById("edit__format-day-moon").value,e[changeMoonBtn.dataset.id].horoscope=document.getElementById("edit__textarea-moon").value,localStorage.setItem("moonHoroscopes",JSON.stringify(e)),document.location.href="/"};changeMoonBtn.addEventListener("click",saveChangesMoon);