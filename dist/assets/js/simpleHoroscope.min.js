let signs=["Овен","Телец","Близнецы","Рак","Лев","Дева","Весы","Скорпион","Стрелец","Козерог","Водолей","Рыбы"],horoscopeLinks=document.querySelectorAll(".horoscope__link"),horoscopeContents=document.querySelectorAll(".horoscope__content"),simpleHoroscopeEditForm=document.querySelector(".edit-simple");function changeHoroscopeTab(e){horoscopeLinks.forEach(function(e,o){e.classList.remove("horoscope__link-active")}),horoscopeContents.forEach(function(e,o){e.classList.remove("horoscope__content-active")}),horoscopeLinks[e].classList.add("horoscope__link-active"),horoscopeContents[e].classList.add("horoscope__content-active")}horoscopeLinks.forEach(function(e,o){e.addEventListener("click",function(){changeHoroscopeTab(o)})}),document.querySelector(".edit__format-day").value=(new Date).toISOString().substr(0,10);let formatChoose=document.querySelector(".edit__format"),inputs=document.querySelectorAll(".edit__format-option");function editSimpleFormatChoose(){inputs.forEach(function(e,o){e.classList.remove("display_block")}),"day"===formatChoose.value&&inputs[0].classList.add("display_block"),"week"===formatChoose.value&&inputs[1].classList.add("display_block"),"month"===formatChoose.value&&inputs[2].classList.add("display_block")}function openSimpleEdit(){document.querySelector(".horoscope__nav").classList.add("display_none"),document.querySelector(".add__horoscope-simple").classList.add("display_none"),horoscopeContents.forEach(function(e,o){e.classList.remove("horoscope__content-active")}),simpleHoroscopeEditForm.classList.add("display_block")}const goBackSimple=e=>{e.preventDefault(),document.querySelector(".horoscope__nav").classList.remove("display_none"),document.querySelector(".add__horoscope").classList.remove("display_none"),horoscopeContents[0].classList.add("horoscope__content-active"),simpleHoroscopeEditForm.classList.remove("display_block")};function GetSortOrder(t){return function(e,o){return e[t]>o[t]?-1:e[t]<o[t]?1:0}}let daySimpleHoroscopes=JSON.parse(localStorage.getItem("dayHoroscopes"));null==daySimpleHoroscopes&&(daySimpleHoroscopes=[]);let weekSimpleHoroscopes=JSON.parse(localStorage.getItem("weekHoroscopes"));null==weekSimpleHoroscopes&&(weekSimpleHoroscopes=[]);let monthSimpleHoroscopes=JSON.parse(localStorage.getItem("monthHoroscopes"));null==monthSimpleHoroscopes&&(monthSimpleHoroscopes=[]);const saveSimpleHoroscope=e=>{var o;e.preventDefault(),"day"===formatChoose.value?(e={id:daySimpleHoroscopes.length,date:document.getElementById("edit__format-day-simple").value,sign:document.getElementById("edit__sign-simple").value,horoscope:document.getElementById("edit__textarea-simple").value},daySimpleHoroscopes.push(e),document.getElementById("edit-form-simple").reset(),daySimpleHoroscopes=daySimpleHoroscopes.sort(GetSortOrder("date")),localStorage.setItem("dayHoroscopes",JSON.stringify(daySimpleHoroscopes))):"week"===formatChoose.value?(o={id:weekSimpleHoroscopes.length,date:document.getElementById("edit__format-week-simple").value,sign:document.getElementById("edit__sign-simple").value,horoscope:document.getElementById("edit__textarea-simple").value},weekSimpleHoroscopes.push(o),document.getElementById("edit-form-simple").reset(),weekSimpleHoroscopes=weekSimpleHoroscopes.sort(GetSortOrder("date")),localStorage.setItem("weekHoroscopes",JSON.stringify(weekSimpleHoroscopes))):"month"===formatChoose.value&&(o={id:monthSimpleHoroscopes.length,date:document.getElementById("edit__format-month-simple").value,sign:document.getElementById("edit__sign-simple").value,horoscope:document.getElementById("edit__textarea-simple").value},monthSimpleHoroscopes.push(o),document.getElementById("edit-form-simple").reset(),monthSimpleHoroscopes=monthSimpleHoroscopes.sort(GetSortOrder("date")),localStorage.setItem("monthHoroscopes",JSON.stringify(monthSimpleHoroscopes)))};function buildSimpleDayTable(o,t){let s=document.querySelector(".table__body-simple-"+t);if(null!=o){var l=100<o.length?100:o.length;for(let e=0;e<l;e++){var a=`
            <tr class="table__row">
                <td class="table__date">${o[e].date}</td>
                <td class="table__date">${signs[o[e].sign]}</td>
                <td class="table__text">${o[e].horoscope}</td>
                <td class="table__edit table__edit-simple" data-id="${o[e].id}" data-format="${t}" onclick="editExistingSimple(this)"><a href="#">Edit</a></td>
                <td class="table__edit table__edit-simple" data-id="${o[e].id}" data-format="${t}" onclick="deleteExistingSimple(this)"><a href="#">Delete</a></td>
            </tr> `;s.innerHTML+=a}}}function editExistingSimple(e){document.querySelector(".horoscope__nav").classList.add("display_none"),document.querySelector(".add__horoscope-simple").classList.add("display_none"),horoscopeContents.forEach(function(e,o){e.classList.remove("horoscope__content-active")}),simpleHoroscopeEditForm.classList.add("display_block"),document.querySelector(".edit__apply-simple").classList.add("display_none"),document.querySelector(".edit__change-simple").classList.remove("display_none");var o=Array.from(e.parentNode.parentNode.children).indexOf(e.parentNode),e=e.dataset.format;document.querySelector(".edit__change-simple").dataset.id=o;o=JSON.parse(localStorage.getItem(e+"Horoscopes"))[o];document.getElementById("edit__format").value=e,editSimpleFormatChoose(),document.getElementById("edit__format-"+e+"-simple").value=o.date,document.getElementById("edit__sign-simple").value=o.sign,document.getElementById("edit__textarea-simple").value=o.horoscope}function deleteExistingSimple(e){var o=Array.from(e.parentNode.parentNode.children).indexOf(e.parentNode);console.log(o);e=e.dataset.format;let t=JSON.parse(localStorage.getItem(e+"Horoscopes"));t.splice(o,1),localStorage.setItem(e+"Horoscopes",JSON.stringify(t)),document.location.href="/"}document.querySelector(".edit__apply-simple").addEventListener("click",saveSimpleHoroscope),buildSimpleDayTable(daySimpleHoroscopes,"day"),buildSimpleDayTable(weekSimpleHoroscopes,"week"),buildSimpleDayTable(monthSimpleHoroscopes,"month");let changeBtn=document.querySelector(".edit__change-simple");const saveChangesSimple=e=>{e.preventDefault();e=document.getElementById("edit__format").value;let o=JSON.parse(localStorage.getItem(e+"Horoscopes"));o[changeBtn.dataset.id].sign=document.getElementById("edit__sign-simple").value,o[changeBtn.dataset.id].date=document.getElementById("edit__format-"+e+"-simple").value,o[changeBtn.dataset.id].horoscope=document.getElementById("edit__textarea-simple").value,localStorage.setItem(e+"Horoscopes",JSON.stringify(o)),document.location.href="/"};changeBtn.addEventListener("click",saveChangesSimple);